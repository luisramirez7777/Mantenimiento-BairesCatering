<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario de Mantenimiento</title>
    <!-- Link our custom styles -->
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <!-- Header with logo, title and user controls -->
    <header>
        <div class="logo-title">
            <img src="static/images/logo.jpg" alt="Logo" id="logo" />
            <h1>Calendario de Mantenimiento</h1>
        </div>
        <div id="user-controls" class="user-controls">
            <!-- Will be populated by script: shows login/out links and user info -->
        </div>
    </header>

    <!-- Main content area -->
    <main>
        <!-- Controls for calendar navigation and adding tasks -->
        <div class="calendar-controls">
            <button id="prevMonthBtn" class="nav-btn">&#x2039;</button>
            <span id="currentMonth"></span>
            <button id="nextMonthBtn" class="nav-btn">&#x203A;</button>
            <button id="addTaskBtn" class="action-btn" style="display:none;">Agregar tarea</button>
        </div>
        <!-- Calendar grid goes here -->
        <div id="calendar" class="calendar-grid"></div>
    </main>

    <!-- Add Task modal -->
    <div id="addTaskModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2 id="addModalTitle">Agregar tarea</h2>
            <form id="addTaskForm">
                <label for="taskTitle">Título / Descripción</label>
                <input type="text" id="taskTitle" required>

                <label for="taskPlant">Planta</label>
                <select id="taskPlant" required>
                    <option value="San Martin">Planta San Martín</option>
                    <option value="Versalles">Planta Versalles</option>
                </select>

                <label for="taskDateTime">Fecha y hora</label>
                <input type="datetime-local" id="taskDateTime" required>

                <div id="statusGroup">
                    <label for="taskStatus">Estado</label>
                    <select id="taskStatus">
                        <option value="pendiente">Pendiente</option>
                        <option value="en progreso">En progreso</option>
                        <option value="aceptada">Aceptada</option>
                        <option value="completada">Completada</option>
                        <option value="cancelada">Cancelada</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" id="cancelAddBtn" class="cancel-btn">Cancelar</button>
                    <button type="submit" class="save-btn">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Task modal -->
    <div id="editTaskModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Editar tarea</h2>
            <form id="editTaskForm">
                <input type="hidden" id="editTaskId">
                <label for="editTaskTitle">Título / Descripción</label>
                <input type="text" id="editTaskTitle" required>

                <label for="editTaskPlant">Planta</label>
                <select id="editTaskPlant" required>
                    <option value="San Martin">Planta San Martín</option>
                    <option value="Versalles">Planta Versalles</option>
                </select>

                <label for="editTaskDateTime">Fecha y hora</label>
                <input type="datetime-local" id="editTaskDateTime" required>

                <label for="editTaskStatus">Estado</label>
                <select id="editTaskStatus">
                    <option value="pendiente">Pendiente</option>
                    <option value="aceptada">Aceptada</option>
                    <option value="en progreso">En progreso</option>
                    <option value="completada">Completada</option>
                    <option value="cancelada">Cancelada</option>
                </select>
                
                <div class="modal-actions">
                    <button type="button" id="deleteTaskBtn" class="delete-btn">Eliminar</button>
                    <button type="button" id="cancelEditBtn" class="cancel-btn">Cancelar</button>
                    <button type="submit" class="save-btn">Actualizar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Login modal -->
    <div id="loginModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Iniciar sesión</h2>
            <form id="loginForm">
                <label for="loginUsername">Usuario</label>
                <input type="text" id="loginUsername" required>
                <label for="loginPassword">Contraseña</label>
                <input type="password" id="loginPassword" required>
                <div id="loginError" class="error-msg" style="display:none;">Usuario o contraseña incorrectos</div>
                <div class="modal-actions">
                    <button type="submit" class="save-btn">Entrar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Overlay for modals -->
    <div id="overlay" class="overlay" style="display:none;"></div>

    <script src="static/js/script.js"></script>
</body>
</html>